{"version":3,"sources":["../../src/Fields/Field.js"],"names":["ScrollElement","Element","Field","props","context","setError","setState","isValid","reset","onChange","getFieldName","node","value","changeValidation","data","typeName","state","console","log","entityField","Error","className","labelClassName","fieldName","v4","name","fieldProps","children","disableLabel","UUID","getFieldUUID","label","defaultValue","otherProps","omit","attrs","Object","assign","id","ref","getFieldClasses","type","renderLabel","isLabelEnabled","getLabelClasses","createElement","getContainerClasses","containerClassName","registerEntityField","getRegisteredFields","registerTypeFields","Component","propTypes","PropTypes","string","bool","defaultProps","contextTypes","object","func","onSubmit"],"mappings":"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","file":"Field.js","sourcesContent":["import React from 'react';\nimport uuid from 'uuid';\nimport _ from 'lodash';\nimport Scroll from 'react-scroll';\nimport classnames from 'classnames';\n\nconst ScrollElement = Scroll.Element;\n\nclass Field extends React.Component {\n  constructor(props, context) {\n    super(props);\n\n    let value;\n    if (context && props) {\n      value = context.data[this.getFieldName()] || '';\n    }\n\n    this.typeName;\n\n    this.value = value;\n    this.state = {\n      isValid: true,\n      value\n    };\n\n    console.log(this);\n  }\n\n  getFieldName() {\n    if (!this.props.entityField) {\n      throw Error('entityField is required!');\n    }\n    return this.props.entityField;\n  }\n\n  getFieldClasses() {\n    return classnames('speck-form__field__input',\n      this.props.className, {\n        [`${this.props.className}--error`]: !this.state.isValid\n      }\n    );\n  }\n\n  getLabelClasses() {\n    return classnames('speck-form__label',\n      this.props.labelClassName\n    );\n  }\n\n  getFieldUUID() {\n    const fieldName = this.getFieldName();\n    return `speck-form__id--${fieldName}-${uuid.v4()}`;\n  }\n\n  renderField(name, fieldProps, children) {\n    const { disableLabel } = this.context;\n    const UUID = this.getFieldUUID();\n    const label = fieldProps.label;\n    const { defaultValue } = this.props;\n    const fieldName = this.getFieldName();\n\n    const otherProps = _.omit(fieldProps, [\n      'label',\n      'children',\n      'className',\n      'entityField',\n      'labelClassName',\n      'datetime-local',\n      'changeValidation',\n      'containerClassName'\n    ]);\n\n    const attrs = Object.assign({\n      id: UUID,\n      ref: (node) => (this.node = node),\n      name: fieldName,\n      className: this.getFieldClasses(),\n      defaultValue: this.state.value || defaultValue,\n      onChange: this.onChange\n    }, otherProps);\n\n    this.typeName = attrs.type;\n\n    let renderLabel;\n    const isLabelEnabled = (label && !disableLabel);\n    if (isLabelEnabled) {\n      renderLabel = (\n        <label htmlFor={attrs.id} className={this.getLabelClasses()}>\n          {label}\n        </label>\n      );\n    }\n\n    if (fieldProps.type === 'hidden') {\n      return React.createElement(name, attrs, children);\n    }\n\n    return (\n      <ScrollElement name={this.getFieldName()}>\n        <section className={this.getContainerClasses()}>\n          {renderLabel}\n          {React.createElement(name, attrs, children)}\n        </section>\n      </ScrollElement>\n    );\n  }\n\n  getContainerClasses() {\n    return classnames('speck-form__container',\n      this.props.containerClassName,\n      `speck-form__container--${this.getFieldName()}`, {\n        'has-error': !this.state.isValid\n      });\n  }\n\n  setError = () => {\n    this.setState({isValid: false});\n  }\n\n  reset = () => {\n    this.setState({isValid: true});\n  }\n\n  onChange = () => {\n    const { onChange } = this.context;\n    onChange(this.getFieldName(), this.node.value, this.props.changeValidation);\n  }\n\n  componentDidMount() {\n    const {\n      registerEntityField,\n      getRegisteredFields,\n      registerTypeFields\n    } = this.context;\n\n    let value;\n    if (this.node) {\n      value = this.node.value || this.node.defaultValue;\n    }\n\n    registerEntityField(this.getFieldName(), value, {\n      reset: this.reset,\n      setError: this.setError\n    });\n  }\n}\n\nField.propTypes = {\n  className: React.PropTypes.string,\n  entityField: React.PropTypes.string,\n  labelClassName: React.PropTypes.string,\n  changeValidation: React.PropTypes.bool,\n  containerClassName: React.PropTypes.string\n};\n\nField.defaultProps = {\n  changeValidation: false\n};\n\nField.contextTypes = {\n  data: React.PropTypes.object,\n  onChange: React.PropTypes.func,\n  onSubmit: React.PropTypes.func,\n  disableLabel: React.PropTypes.bool,\n  registerEntityField: React.PropTypes.func\n};\n\nexport default Field;\n"]}