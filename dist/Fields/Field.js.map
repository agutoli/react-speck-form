{"version":3,"sources":["../../src/Fields/Field.js"],"names":["Field","props","context","setError","setState","isValid","reset","onChange","getFieldName","node","value","changeValidation","data","typeName","state","entityField","Error","className","labelClassName","fieldName","v4","name","fieldProps","children","disableLabel","UUID","getFieldUUID","label","defaultValue","otherProps","omit","attrs","Object","assign","id","ref","getFieldClasses","type","renderLabel","isLabelEnabled","getLabelClasses","getContainerClasses","createElement","containerClassName","registerEntityField","getRegisteredFields","registerTypeFields","Component","propTypes","PropTypes","string","bool","defaultProps","contextTypes","object","func","onSubmit"],"mappings":"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","file":"Field.js","sourcesContent":["import React from 'react';\nimport uuid from 'uuid';\nimport _ from 'lodash';\nimport classnames from 'classnames';\n\nclass Field extends React.Component {\n  constructor(props, context) {\n    super(props);\n\n    let value;\n    if (context && props) {\n      value = context.data[this.getFieldName()] || '';\n    }\n\n    this.typeName;\n\n    this.value = value;\n    this.state = {\n      isValid: true,\n      value\n    };\n  }\n\n  getFieldName() {\n    if (!this.props.entityField) {\n      throw Error('entityField is required!');\n    }\n    return this.props.entityField;\n  }\n\n  getFieldClasses() {\n    return classnames(this.props.className, 'speck-form__field__input');\n  }\n\n  getLabelClasses() {\n    return classnames('speck-form__label',\n      this.props.labelClassName\n    );\n  }\n\n  getFieldUUID() {\n    const fieldName = this.getFieldName();\n    return `speck-form__id--${fieldName}-${uuid.v4()}`;\n  }\n\n  renderField(name, fieldProps, children) {\n    const { disableLabel } = this.context;\n    const UUID = this.getFieldUUID();\n    const label = fieldProps.label;\n    const { defaultValue } = this.props;\n    const fieldName = this.getFieldName();\n\n    const otherProps = _.omit(fieldProps, [\n      'label',\n      'children',\n      'className',\n      'entityField',\n      'labelClassName',\n      'datetime-local',\n      'changeValidation',\n      'containerClassName'\n    ]);\n\n    const attrs = Object.assign({\n      id: UUID,\n      ref: (node) => (this.node = node),\n      name: fieldName,\n      className: this.getFieldClasses(),\n      defaultValue: this.state.value || defaultValue,\n      onChange: this.onChange\n    }, otherProps);\n\n    this.typeName = attrs.type;\n\n    let renderLabel;\n    const isLabelEnabled = (label && !disableLabel);\n    if (isLabelEnabled) {\n      renderLabel = (\n        <label htmlFor={attrs.id} className={this.getLabelClasses()}>\n          {label}\n        </label>\n      );\n    }\n\n    return (\n      <section className={this.getContainerClasses()}>\n        {renderLabel}\n        {React.createElement(name, attrs, children)}\n      </section>\n    );\n  }\n\n  getContainerClasses() {\n    return classnames('speck-form__container',\n      this.props.containerClassName,\n      `speck-form__container--${this.getFieldName()}`, {\n        'speck-form__container--error': !this.state.isValid\n      });\n  }\n\n  setError = () => {\n    this.setState({isValid: false});\n  }\n\n  reset = () => {\n    this.setState({isValid: true});\n  }\n\n  onChange = () => {\n    const { onChange } = this.context;\n    onChange(this.getFieldName(), this.node.value, this.props.changeValidation);\n  }\n\n  componentDidMount() {\n    const {\n      registerEntityField,\n      getRegisteredFields,\n      registerTypeFields\n    } = this.context;\n\n    let value;\n    if (this.node) {\n      value = this.node.value || this.node.defaultValue;\n    }\n\n    registerEntityField(this.getFieldName(), value, {\n      reset: this.reset,\n      setError: this.setError\n    });\n  }\n}\n\nField.propTypes = {\n  className: React.PropTypes.string,\n  entityField: React.PropTypes.string,\n  labelClassName: React.PropTypes.string,\n  changeValidation: React.PropTypes.bool,\n  containerClassName: React.PropTypes.string\n};\n\nField.defaultProps = {\n  changeValidation: false\n};\n\nField.contextTypes = {\n  data: React.PropTypes.object,\n  onChange: React.PropTypes.func,\n  onSubmit: React.PropTypes.func,\n  disableLabel: React.PropTypes.bool,\n  registerEntityField: React.PropTypes.func\n};\n\nexport default Field;\n"]}